{% extends "base.html" %}
{% block title %}Reportes del Sistema{% endblock %}
{% block contenido %}
<div class="container">
    <h2 class="titulo">ğŸ“Š Reportes del Sistema</h2>

    <div class="acciones-superiores">
        <a href="{{ url_for('index') }}" class="btn-volver">ğŸ  Volver al MenÃº Principal</a>
    </div>

    <div class="cards-reportes">
        <div class="card-reporte">
            <h3>Total de Productos</h3>
            <p class="dato">{{ total_productos }}</p>
        </div>
        <div class="card-reporte">
            <h3>Total de Unidades</h3>
            <p class="dato">{{ total_unidades }}</p>
        </div>
        <div class="card-reporte">
            <h3>Valor Total Inventario</h3>
            <p class="dato">${{ "%.2f"|format(valor_inventario) }}</p>
        </div>
        <div class="card-reporte">
            <h3>Alertas Activas</h3>
            <p class="dato">{{ total_alertas }}</p>
        </div>
    </div>

    <h3 class="subtitulo">ğŸ“¦ Productos por Tipo</h3>
    <ul class="lista-tipos">
        <li>ğŸ§´ Aseo Personal: <strong>{{ por_tipo['aseo personal'] }}</strong></li>
        <li>ğŸ  Hogar: <strong>{{ por_tipo['hogar'] }}</strong></li>
        <li>ğŸ“¦ Otros: <strong>{{ por_tipo['otros'] }}</strong></li>
    </ul>

    <h3 class="subtitulo">ğŸ’° Ãšltimas Ventas</h3>
    {% if ultimas_ventas %}
    <table class="tabla">
        <thead>
            <tr><th>Producto</th><th>CÃ³digo</th><th>Cantidad</th><th>Precio</th><th>Fecha</th></tr>
        </thead>
        <tbody>
        {% for v in ultimas_ventas %}
            <tr>
                <td>{{ v.nombre }}</td>
                <td>{{ v.codigo }}</td>
                <td>{{ v.cantidad }}</td>
                <td>${{ "%.2f"|format(v.precio) }}</td>
                <td>{{ v.fecha }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="texto-vacio">No hay ventas registradas.</p>
    {% endif %}

    <h3 class="subtitulo">ğŸ›’ Ãšltimas Compras</h3>
    {% if ultimas_compras %}
    <table class="tabla">
        <thead>
            <tr><th>Producto</th><th>CÃ³digo</th><th>Cantidad</th><th>Precio</th><th>Fecha</th></tr>
        </thead>
        <tbody>
        {% for c in ultimas_compras %}
            <tr>
                <td>{{ c.nombre }}</td>
                <td>{{ c.codigo }}</td>
                <td>{{ c.cantidad }}</td>
                <td>${{ "%.2f"|format(c.precio) }}</td>
                <td>{{ c.fecha }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="texto-vacio">No hay compras registradas.</p>
    {% endif %}

    <h3 class="subtitulo">ğŸ”„ Ãšltimas Devoluciones</h3>
    {% if ultimas_devoluciones %}
    <table class="tabla">
        <thead>
            <tr><th>Producto</th><th>CÃ³digo</th><th>Cantidad</th><th>Motivo</th><th>Fecha</th></tr>
        </thead>
        <tbody>
        {% for d in ultimas_devoluciones %}
            <tr>
                <td>{{ d.nombre }}</td>
                <td>{{ d.codigo }}</td>
                <td>{{ d.cantidad }}</td>
                <td>{{ d.motivo }}</td>
                <td>{{ d.fecha }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="texto-vacio">No hay devoluciones registradas.</p>
    {% endif %}
</div>
{% endblock %}
